# json_parser_csharp

This example demonstrates a C# parser and semantic actions generated by `parol`.
It ports `examples/json_parser` to C# and parses JSON input into a normalized textual representation.

Note: C# code generation currently supports only LL(k) grammars. Grammars with
`%grammar_type 'LALR(1)'` are rejected until the C# LALR(1) path is implemented.

## Run

From the repository root, execute:

```powershell
dotnet run --project .\examples\json_parser_csharp\json_parser_csharp.csproj -- examples/json/JsonParserTest.json
```

Visual Studio users can open `json_parser_csharp.csproj` directly; a solution file is intentionally not tracked for this single-project example.

You can also use smaller inputs in `examples/json` (for example `object.json`, `array.json`, `number.json`).

## Conversion principle (%nt_type mapping)

This example demonstrates the recommended modern type-mapping approach:

- `%nt_type` is the preferred way to define non-terminal type mappings.
- Grammar declaration: `%nt_type String = JsonParserCsharp::JsonString`
- Grammar declaration: `%nt_type Number = JsonParserCsharp::JsonNumber`
- `JsonString` and `JsonNumber` conversion types are included in the example.
- Conversion happens through generated mapping/runtime conversion by using constructible target types.

## CI note

The project file imports `parol.targets`, which generates parser sources only when `parol` is available.
If `parol` is not on `PATH` (for example in CodeQL builds), generation is skipped with a warning and the checked-in generated files are used.

To use a custom executable path/name, pass:

```powershell
dotnet build .\examples\json_parser_csharp\json_parser_csharp.csproj /p:ParolCommand=parol
```
